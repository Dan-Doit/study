name: Test CI-CD

on:
  push:
    tags:
      - "[0-9].[0-9]+.[0-9]+-md.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-ms.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-mp.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-sd.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-ss.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-sp.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-ad.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-as.[0-9]+"
      - "[0-9].[0-9]+.[0-9]+-ap.[0-9]+"

env:
  TARGET_ENVIRONMENT: ${{ github.ref }}

jobs:
  test:
    name: Test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - name: Test
        run: |
          TAG=${GITHUB_REF#refs/tags/}
          SPLIT=${TAG##*-}
          echo "SERVICE=${SPLIT%%.*}" >> $GITHUB_ENV
      - name: Echo SERVICE
        run: echo "${{env.SERVICE}}"
