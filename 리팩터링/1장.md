# 1장

---



리팩터링에서 테스트의 역할은 굉장이 중요하다. 리팩터링의 기법들은 그 발생 여지를 최소화 하도록 구성하였다고 하나 실제 작업은 사람이 수행하기 때문에 언제든 실수할수 있다.



### 1. 함수 쪼개기

함수를 쪼개기 위해서 우리는 먼저 코드의 큰 구조들을 파악해야한다.

이는 머릿속에 암기만 하기에 빠르게 기억에서 삭제 될수 있으므로 그 코드가 하는일을 설명하는 이름을 지어주도록한다.

이 작업을 우리는 **함수 추출하기**란 이름을 붙이기로한다.



### 2. 변수 이름 재정의하기

변수 이름은 항상 명확하고 그 변수의 역할을 쉽게 알수 있도록 지어놓는다.

가령 return 되는 변수의 이름을 result로 지어준다던지



### 3. 임시 변수 질의 함수로 바꾸기

임시변수등은 로컬 범위 내에 존재하는 이름이 늘어나서 추출 작업이 복잡해진다.

변수의 값을 구하는 함수를 따로 만들어 대체할수있다.



### 4. 변수 인라인하기

위의 만든 함수를 대체하여 변수가 있는 코드에 적용을 시켜준다.



### 5. 계산(연산) 코드 추출하기

원을 달러로 변환 한다던지 어떤 데이터를 정해진 포멧으로 바꿀때는 함수로 정의해서 직접 구하는것이 좋다.



### 6. 반복문 쪼개기

계속해서 값이 누적되는 반복문의 경우 따로 분리하여 관리하는것이 좋다.

보통 다음의 스탭을 따라 진행하면 편하다.

- 반복문 쪼개기 : 변수 값을 누적시키는 부분을 분리한다.
- 문장 슬라이드하기 : 변수 초기화 문장을 누적 코드 바로 앞으로 오게한다.
- 함수 추출하기 : 적집 포인트 계산 부분을 별도 함수로 추출한다.
- 변수 인라인하기 : 필요 없는 변수를 함술 대체한다.



### 7. 다형성을 활용해 계산 코드 재구성하기

클래스 형식으로 다형성을 활용해 계산 코드를 재구성할수 있다.

가령 switch 를 사용한다던지 많은 if문을 사용할때 분리되는 케이스 대로 클래스의

함수를 만들어 이를 구성하면 보다 직관적으로 함수가 보이게된다.



> 1장을 마치며
>
> '좋은 코드를 가늠하는 확실한 방법은 얼마나 수정하기 쉬운가이다.'
>
> 건강한 코드베이스는 생산성을 극대화하고, 고객에게 필요한 기능을 더 빠르고 저렴한 비용으로 제공하도록 해준다.
>
> 리팩토링을 효과적으로 하는 핵심은 **단계를 잘게 나누고** 코드는 절대 깨지지 않으며 이러한 부분이 모여 상당히 큰 변화를 이룰 수 있다는 사실을 깨닫는것이다. 
>
> 테스트 코드를 작성하는 것 또한 매우 중요한 요소이다.

