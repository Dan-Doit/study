# 오케스트레이션 기반 아키텍처

모든 아키텍처가 완벽하지 많은 안습니다. 우리는 아키텍처의 잘못된 역사를 알고 이를 개선해야하는 경우가 필요합니다.

실로 오케스트레이션 아키텍처는 한 조직의 아이디어였는데 이 아이디어는 훗날 가장 중요한 부분을 망쳐놓게 됩니다.

MSA의 오케스트레이션과 오케스트레이션 기반 아키텍처는 다른말입니다.



## 역사

서비스 지향 아키텍처가 1990년대 후반에 등장 후 대기업과 중소기업의 인수 합병을 통해 빠른 속도로 성장을 하였습니다.

당시에 아키텍트들은 다양한 외부 여건의 탓에 어쩔 수 없이 제약이 많은 분산 아키텍처를 구축했습니다.

그리고 많은 라이센스 구매와 데이터베이스를 사용하다보니 최대한 재사용하는 것을 목표로 하게되었고,

모든 형태의 재사용은 이 아키텍처의 중심 철학이 되었습니다.



## 포톨로지

이 아키텍처의 핵심은 아키텍처 내부에 **서비스 텍소노미**를 정립하여 레이어별로 책임을 지운다는 아이디어는 동일합니다.

> 택소노미
>
> *엔터프라이즈 레벨의 재사용을 위해 만든 하나의 분류체계*

![image-20220818144218011](Orchestration Based.assets/image-20220818144218011.png) 

- 비지니스 서비스 역할

  최상단에 위치한 비지니스 서비스의 진입점 역할입니다.

  이 서비스의 정의는 코드는 전혀없고 오로지 입력, 출력, 스키마 정보만 가지고 있습니다.

  일반적으로 제공을 하는 곳이며 사용은 엔터프라이즈 서비스에서 정의하여 사용합니다.



- 엔터프라이즈 서비스 역할

  세분화된 공유 구현체입니다.

  일반적으로 개발팀은 특정 비즈니스 도메인에 관한 행위를 여기에서 구현하게됩니다.

  보통의 엔터프라이즈 서비스는 오케스트레이션 엔진을 통해 묶인, 단위가 큰 비지니스 서비스 구성 요소들입니다.

  원래의 목적은 비지니스 서비스의 워크플로우를 재사용 하기위한 구조로 설계되었으나 이 시도는 실패로 끝났습니다.

  수십년간 솔루션이 정착된 비지니스 컴포넌트들은 본질부터 서로 달랐기 때문입니다.

  그리고 소프트웨어 간의 경쟁과 기술변화는 이 실패를 더욱 가속화 시켰습니다.



- 애플리케이션 서비스

  아키텍처의 모든 서비스가 엔터프라이즈의 서비스와 동일한 레벨의 세분화와 재사용성이 필요하지는 않습니다.

  이 서비스는 단일 구현체 서비스입니다.

  만약 위치정보 서비스를 여기서 구현하였다면 엔터프라이즈 서비스는 이 단일 애플리케이션 서비스를 따로 사용하기만 하면됩니다.



- 인프라 서비스

  이 서비스는 모니터링, 로깅, 인증/인가 등의 운영 관심사를 지원합니다.



## 오케스트레이션 엔진

이 엔진은 분산 아키텍처의 중요핵심입니다.

이 엔진은 비지니스 서비스 구현체를 서로 엮어주면서 트랜잭션 조정과 메시지 변환등의 핵심 기능을 수행합니다.

일반적으로 비지니스 서비스에서는 단일 관계형 데이터 베이스를 사용합니다.