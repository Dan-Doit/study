## 헥사고널 아키텍처

계층형 이키텍처의 간점을 해결하고 좀 더 복잡한 비지니스 로직을 구현하는데 적합하다.

흥미롭게도 두 패턴은 매우 비슷하다.



### 배경

우리는 코드를 짤때 오로지 비지니스에만 집중하고싶다.

다른 인프라의 구조에 의해 코드의 구조와 설계가 바뀌는 것은 올바르지않다.

이러한 점을 해결하기위해 헥사고널 아키텍처는 각광을 받기 시작하였다.

또한 기존의 계층형 아키텍처에서는 의존성 역전의 원칙(DIP)를 적용하는데에 한계가 있다.

또한 도메인이 인프라에 의존하게되는 단점이 있었다.

>의존성 역전 원칙(DIP)
>
>*비지니스 로직을 구현하는 상위 수준의 모듈은 하위수준의 모듈에 의존해서는 안된다.*

포트와 어댑터 아키텍처의 핵심 목적은 인프라스트럭처 구성요소(데이터 베이스, UI 프레임워크, 외부 서비스, 메시지 서비스등)로부터 비지니스 로직을 분리하는 것이다.



### 포트와 어댑터

내부 영역은 순수한 비지니스 로직을 표현하는 영역으로 외부 영역과 연계되는 포트(Port)가 있고

외부 영역은 외부에서 들어오는 요청을 처리하는 인바운드 어댑터(Inbound Adapter)가 있다.

비지니스 영역은 비지니스 로직에 의해 호출되어 외부와 연계되는 아웃바운드 어댑터(Outbound Adapter)로 구성이된다.

포트는 인 바운드(Inbound)/아웃 바운드(Outbound) 포트로 구분되고, 

인 바운드 포트는 내부 영역 사용을 위해 표출된 API이며, 외부 영역의 인 바운드 어댑터가 호출한다. 

아웃 바운드 포트는 내부 영역이 외부를 호출하는 방법을 정의한다.

헥사고날의 가장 큰 특징은 비즈니스 로직을 표현하는 내부 영역이 어댑터에 의존하지 않고 오직 내부 영역이 제공하는 포트에 의존하여 구현하는 것이다.



### 장점

- 아키텍처 확장이 용이하다
- SOLID 원칙을 쉽게 적용할 수 있다.
- 모듈 일부를 배포할 수 있다.
- 테스트를 위해 모듈을 가짜로 바꿀 수 있으므로 테스트가 더 안정적이고 쉽다.
- 더 큰 비지니스적 가치를 갖고 더 오래 지속되는 도메인 메델에 큰 관심을 둔다.



### 포트

- 인터페이스 영역이라고 볼수 있습니다.
- 도메인을 사용하는, 서비스 함수가 사용할
- 즉 내부 영역이 외부 영역에 노출하는 usecase에 대한 규칙을 정의하는곳입니다.
- In-Port와 Out-Port가 존재합니다.
  - 도메인으로 들어오는 요청
  - 도메인에서 사용하는 요청



### 어뎁터

- 동일한 포트에 다른 인프라 스트럭쳐를 얹으려면사용하는 부분입니다.
- In-Adapter
  - 실제 인터페이스에의 구현이 도메인 내부에 있는것이 핵심입니다.
  - 외부 어탭터는 단순히 그 구현을 사용하는것입니다.
- Out-Adapter
  - 어댑터에서 실제 인터페이스 구현이 발생합니다.
  - 도메인 계층에서는 그것을 사용하기만 하면됩니다.



### 주의점

- 서비스 계층이 복잡하지 않도록 dump해주는것이 중요합니다.



### 참고하면 좋은 블로그

[헥사고널 아키텍처](https://blog.imqa.io/hexagonal-architecture/)

